<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appointments - Yanet Dental Clinic</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Header -->
  <header class="bg-[#E6F7F9] shadow-md py-4">
    <div class="container mx-auto px-4 flex justify-between items-center">
      <h1 class="text-xl font-bold text-gray-800">Yanet Dental Clinic</h1>
    </div>
  </header>

  <!-- Page Title -->
  <section class="text-center py-6">
    <h2 class="text-2xl font-bold text-gray-800">Appointments</h2>
    <p class="text-gray-600">Book or manage your dental appointments with ease.</p>
  </section>

  <!-- Appointment Tabs -->
  <div class="container mx-auto px-4">
    <div class="flex justify-center space-x-4 mb-6">
      <button class="tab-btn bg-blue-500 text-white px-4 py-2 rounded-lg" data-tab="book">Book Appointment</button>
      <button class="tab-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-lg" data-tab="reschedule">Reschedule</button>
      <button class="tab-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-lg" data-tab="recovery">Recovery Journey</button>
      <button class="tab-btn bg-gray-200 text-gray-800 px-4 py-2 rounded-lg" data-tab="before">Before Treatment</button>
    </div>

    <!-- Book Appointment Tab -->
    <div id="book" class="tab-content">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Book Appointment Today</h3>
      <form id="appointmentForm" class="mt-6 space-y-4 max-w-md mx-auto bg-white p-6 rounded-xl shadow-md">
        <div>
          <label class="block text-gray-700">Full Name</label>
          <input id="fullName" type="text" class="w-full border rounded-lg px-3 py-2 mt-1" placeholder="Enter your name" required>
        </div>
        <div>
          <label class="block text-gray-700">Phone Number</label>
          <input id="phone" type="tel" class="w-full border rounded-lg px-3 py-2 mt-1" placeholder="+251..." required>
        </div>
        <div>
          <label class="block text-gray-700">Preferred Date</label>
          <input id="date" type="date" class="w-full border rounded-lg px-3 py-2 mt-1" required>
        </div>
        <div>
          <label class="block text-gray-700">Message</label>
          <textarea id="message" class="w-full border rounded-lg px-3 py-2 mt-1" rows="3" placeholder="Any details..."></textarea>
        </div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg font-semibold">Book Now</button>
      </form>
    </div>

    <!-- Reschedule Tab -->
    <div id="reschedule" class="tab-content hidden">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Reschedule Appointment</h3>
      <form class="mt-6 space-y-4 max-w-md mx-auto bg-white p-6 rounded-xl shadow-md">
        <div>
          <label class="block text-gray-700">Appointment ID</label>
          <input type="text" class="w-full border rounded-lg px-3 py-2 mt-1" placeholder="Enter your appointment ID">
        </div>
        <div>
          <label class="block text-gray-700">New Date</label>
          <input type="date" class="w-full border rounded-lg px-3 py-2 mt-1">
        </div>
        <button type="submit" class="w-full bg-yellow-500 text-white py-2 rounded-lg font-semibold">Reschedule</button>
      </form>
    </div>

    <!-- Recovery Tab -->
    <div id="recovery" class="tab-content hidden">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Recovery Journey</h3>
      <p class="text-gray-600 text-center">Track your recovery process after treatment.</p>
    </div>

    <!-- Before Treatment Tab -->
    <div id="before" class="tab-content hidden">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Before Treatment</h3>
      <p class="text-gray-600 text-center">Guidelines and tips before visiting the clinic.</p>
    </div>
  </div>

  <!-- Sticky Bottom Nav -->
  <nav class="fixed bottom-0 left-0 w-full bg-[#E6F7F9] border-t border-gray-200 shadow-sm flex justify-around py-2 z-50 backdrop-blur-sm">
    <a href="index.html" class="flex flex-col items-center text-gray-700 hover:text-blue-600">
      <span class="material-icons">home</span>
      <span class="text-xs">Home</span>
    </a>
    <a href="appointments.html" class="flex flex-col items-center text-blue-600">
      <span class="material-icons">event</span>
      <span class="text-xs">Appointments</span>
    </a>
    <a href="blogs.html" class="flex flex-col items-center text-gray-700 hover:text-blue-600">
      <span class="material-icons">article</span>
      <span class="text-xs">Blogs</span>
    </a>
  </nav>

  <!-- Tab Script -->
  <script>
    const tabButtons = document.querySelectorAll(".tab-btn");
    const tabContents = document.querySelectorAll(".tab-content");

    tabButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        tabButtons.forEach(b => b.classList.remove("bg-blue-500", "text-white"));
        tabContents.forEach(c => c.classList.add("hidden"));

        btn.classList.add("bg-blue-500", "text-white");
        document.getElementById(btn.dataset.tab).classList.remove("hidden");
      });
    });
  </script>

  <!-- Supabase Script -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://YOUR_PROJECT_ID.supabase.co"; 
    const SUPABASE_KEY = "YOUR_PUBLIC_ANON_KEY"; 
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    document.getElementById("appointmentForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const fullName = document.getElementById("fullName").value;
      const phone = document.getElementById("phone").value;
      const date = document.getElementById("date").value;
      const message = document.getElementById("message").value;

      const { data, error } = await supabaseClient
        .from("appointments")
        .insert([{ full_name: fullName, phone: phone, preferred_date: date, message: message }]);

      if (error) {
        alert("❌ Something went wrong: " + error.message);
        console.error(error);
      } else {
        alert("✅ Appointment booked successfully!");
        e.target.reset();
      }
    });
  </script>

</body>
</html>
